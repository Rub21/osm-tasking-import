!function(e){function t(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){o(1);o(2)()},function(e,t){},function(e,t,o){var r=o(3);e.exports=function(){function e(e){$.getJSON("http://localhost:8111/import?new_layer=true&url=https://s3.amazonaws.com/tofix/aa.osm")}function t(e,t){firebase.database().ref(r.layerId+"/"+t.properties.idgrid).set({status:e})}function o(){firebase.database().ref(r.layerId).on("value",function(e){a(e.val()||{})},function(e){console.log("The read failed: "+e.code)})}function a(e){s?n(e,s):$.getJSON(r.gist,function(t){s=t,n(e,s)})}function n(e,t){for(var o=0;o<t.features.length;o++)t.features[o].properties.status="empty",e[t.features[o].properties.idgrid]&&(t.features[o].properties=Object.assign(t.features[o].properties,e[t.features[o].properties.idgrid]));i.getSource(r.layerId)?i.getSource(r.layerId).setData(t):(i.addLayer({id:r.layerId,type:"fill",source:{type:"geojson",data:t},paint:{"fill-color":{property:"status",type:"categorical",stops:[["empty","#51503f"],["progress","#ffaa00"],["done","#2de561"]]},"fill-opacity":.3}}),i.addLayer({id:"line",type:"line",source:{type:"geojson",data:t},paint:{"line-width":1,"line-color":{type:"categorical",property:"status",stops:[["empty","#51503f"],["progress","#ffaa00"],["done","#2de561"]]}}}))}var s=null;firebase.initializeApp(r.fconfig),mapboxgl.accessToken=r.accessToken;var i=new mapboxgl.Map({container:"map",style:r.style,zoom:12,center:[-71.97722138410576,-13.517379300798098]});i.on("click",r.layerId,function(o){(new mapboxgl.Popup).setLngLat(o.lngLat).setHTML('<li id="start"><a href="#">Start Mapping in JOSM</a></li><li id="done"><a href="#">Mark task as done</a></li>').addTo(i),$("#start").on("click",function(r){e(o.features[0]),t("progress",o.features[0])}),$("#done").on("click",function(e){t("done",o.features[0])})}),$(document).ready(function(){o()})}},function(e,t){e.exports={fconfig:{apiKey:"AIzaSyCur5ERmxypJDuHzrnWqYVzOvYgrLfJuP8",authDomain:"grid-school-peru-done-store.firebaseapp.com",databaseURL:"https://grid-school-peru-done-store.firebaseio.com",projectId:"grid-school-peru-done-store",storageBucket:"",messagingSenderId:"56359557755"},accessToken:"pk.eyJ1Ijoib3NtcGVydSIsImEiOiJjajEzcGp4ZGIwMXZlMnFsam9neWsxbTZuIn0.SLaQDD84yMuzjCp7YXTSog",style:"mapbox://styles/mapbox/streets-v9",gist:"https://gist.githubusercontent.com/Rub21/29483b13401f70a66ce0e9a2cacd8ea7/raw/684a01d2defcfc84e3067e3f89023411f7df704b/grid-peru-schools.geojson",layerId:"school"}}]);